1.main
main
--RunAllTests
----getenv("LEVELDB_TESTS")
----(*t.func)()


2.class DBTest
 public:
  std::string dbname_;
  SpecialEnv* env_;
  DB* db_;

  Options last_options_;
  
3.DBTest()
--DestroyDB(dbname_, Options())
--Reopen

4.
br leveldb::DBImpl::Get
br leveldb::DBImpl::Put

(gdb) bt
#0  leveldb::DBImpl::Get (this=0x698c80, options=..., key=..., value=0x7fffffffdd70) at /home/chenhui/leveldb/db/db_impl.cc:1106
#1  0x0000000000428624 in leveldb::DBTest::Get (this=0x7fffffffdf40, k="foo", snapshot=0x0) at /home/chenhui/leveldb/db/db_test.cc:325
#2  0x00000000004051c3 in leveldb::_Test_Empty::_Run (this=0x7fffffffdf40) at /home/chenhui/leveldb/db/db_test.cc:541
#3  0x0000000000429be8 in leveldb::_Test_Empty::_RunIt () at /home/chenhui/leveldb/db/db_test.cc:538
#4  0x0000000000403d50 in leveldb::test::RunAllTests () at /home/chenhui/leveldb/util/testharness.cc:56
#5  0x0000000000425683 in main (argc=1, argv=0x7fffffffe168) at /home/chenhui/leveldb/db/db_test.cc:2298

5.DBImpl::Get
--snapshot = versions_->LastSequence()
--current = versions_->current()
--leveldb::MemTable::Get
----leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::Iterator::Seek 
------leveldb::SkipList<char const*, leveldb::MemTable::KeyComparator>::FindGreaterOrEqual
--leveldb::Version::Get
----FindFile
----TableCache::Get
------TableCache::FindTable
------Table* t = reinterpret_cast<TableAndFile*>(cache_->Value(handle))->table;
------Table::InternalGet


6.(gdb) bt
#0  leveldb::DBImpl::Put (this=0x698c80, o=..., key=..., val=...) at /home/chenhui/leveldb/db/db_impl.cc:1179
#1  0x0000000000428503 in leveldb::DBTest::Put (this=0x7fffffffe0b0, k="", v="v1") at /home/chenhui/leveldb/db/db_test.cc:316
#2  0x0000000000405357 in leveldb::_Test_EmptyKey::_Run (this=0x7fffffffe0b0) at /home/chenhui/leveldb/db/db_test.cc:547
#3  0x0000000000429c7e in leveldb::_Test_EmptyKey::_RunIt () at /home/chenhui/leveldb/db/db_test.cc:545
#4  0x0000000000403d50 in leveldb::test::RunAllTests () at /home/chenhui/leveldb/util/testharness.cc:56
#5  0x0000000000425683 in main (argc=1, argv=0x7fffffffe2d8) at /home/chenhui/leveldb/db/db_test.cc:2298


7.Put

leveldb::DBTest::Put
--DBImpl::Put
----DB::Put







